@if (isOpen()) {
  @let comp = component();
  <div
    #element
    class="content"
    role="dialog"
    limitFocus
    cdkDrag
    [cdkDragDisabled]="this.fullscreen()"
    (cdkDragEnded)="drag($event)"
    [cdkDragBoundary]="comp?.zoneSelector || 'body'"
    [resizer]="this"
    [resizerHost]="this.resizerHost()"
    [style.width]="component()?.size?.width?.init"
    [style.min-width]="component()?.size?.width?.min"
    [style.max-width]="component()?.size?.width?.max"
    [style.height]="component()?.size?.height?.init"
    [style.min-height]="component()?.size?.height?.min"
    [style.max-height]="component()?.size?.height?.max"
  >
    <div class="window-main">
      @if (comp && comp.bar?.active) {
        <div class="window-title-bar" cdkDragHandle [cdkDragHandleDisabled]="this.fullscreen()">
          @if (comp.bar && comp.bar.title) {
            <div>{{ comp.bar.title }} (x:{{ x }}, y:{{ y }}) {{ comp?.zoneSelector }} | {{ comp.index }}</div>
          }
          @if (comp.bar && comp.bar.buttons) {
            <div class="window-title-buttons">
              <button (click)="change()">
                @if (fullscreen()) {
                  <span class="icon-minimize-2"></span>
                } @else {
                  <span class="icon-fullscreen"></span>
                }
              </button>
              <button (click)="close()"><span class="icon-remove"></span></button>
            </div>
          }
        </div>
      }
      <ng-content />
      @if (comp) {
        <ng-container [ngComponentOutlet]="comp.component" [ngComponentOutletInputs]="withContext(comp.inputs)" />
      }
    </div>
  </div>
}

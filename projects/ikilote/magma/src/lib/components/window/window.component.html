@if (isOpen()) {
  @let comp = component();
  <div
    #element
    class="content"
    role="dialog"
    cdkDrag
    (cdkDragEnded)="drag($event)"
    [cdkDragBoundary]="comp?.zoneSelector || 'body'"
    limitFocus
    [resizer]="this"
    [resizerHost]="this.resizerHost()"
  >
    <div class="window-main">
      @if (comp && comp.bar?.active) {
        <div class="window-title-bar" cdkDragHandle>
          @if (comp.bar && comp.bar.title) {
            <div>{{ comp.bar.title }} (x:{{ x }}, y:{{ y }})</div>
          }
          @if (comp.bar && comp.bar.buttons) {
            <div class="window-title-buttons">
              <button (click)="change()"><span class="icon-fullscreen"></span></button>
              <button (click)="close()"><span class="icon-remove"></span></button>
            </div>
          }
        </div>
      }
      <ng-content />
      @if (comp) {
        <ng-container [ngComponentOutlet]="comp.component" [ngComponentOutletInputs]="withContext(comp.inputs)" />
      }
    </div>
  </div>
}
